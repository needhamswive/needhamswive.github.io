{% assign record = include.records | first %}

<table>
  <thead>
    <tr>
      <th style="text-align: center;">Date</th>
      {% if record.school %}
        <th>School</th>
      {% endif %}
      <th>Athlete(s)</th>
      <th style="text-align: center;">Result</th>
    </tr>
  </thead>
  <tbody>
    {% for event in include.events %}
      <tr>
        <td colspan="4" style="font-weight: bold; text-align: center;">{{ event | format_cell }}</td>
      </tr>
      {% assign records-for-event = include.records | where: "event", event %}
      {% for record in records-for-event %}
        <tr>
          <td style="text-align: center;">{{ record.date | format_cell }}</td>
          {% if record.school %}
            <td>{{ record.school | format_cell }}</td>
          {% endif %}
          <td>{{ record.name | format_cell }}</td>
          <td style="text-align: center;">{{ record.result | format_cell }}</td>
        </tr>
      {% endfor %}
    {% endfor %}
  </tbody>
</table>
